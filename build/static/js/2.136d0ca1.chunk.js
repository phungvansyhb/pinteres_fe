(this.webpackJsonppinterest=this.webpackJsonppinterest||[]).push([[2],{165:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var c,a=n(21),r=n(77),i=n(0),o=(n(183),n(254)),s=n(22),l=n(76),u=n(54),d=n(192),j=n.n(d),b=n(184),m=n.n(b),f=n(247),x=n(4),p=(n(191),n(5));t.b=function(e){var t=e.srcImage,n=e.title,c=(e.description,e.createdAt,e.updatedAt,e._id),a=e.amountComment,o=(Object(r.a)(e,["srcImage","title","description","createdAt","updatedAt","_id","amountComment"]),Object(x.l)()),s=Object(i.useCallback)((function(e){e.stopPropagation(),t&&m.a.saveAs(t,n||"image"+Date.now().toString())}),[t]);return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"pin",children:Object(p.jsxs)("div",{className:"pin__container",onClick:function(){return o("/image/".concat(c))},children:[Object(p.jsx)("img",{src:t,alt:"pin"}),Object(p.jsxs)("div",{className:"pin__itemOverlay",children:[Object(p.jsx)(l.a,{padding:"8px",bgColor:u.a.RED,color:u.a.WHITE,onClick:s,children:Object(p.jsx)(f.a,{})}),Object(p.jsxs)("div",{style:{color:u.a.WHITE,fontWeight:700,display:"flex",alignItems:"center"},children:[a," ",Object(p.jsx)(j.a,{})]})]})]})})})};var h=Object(s.a)(o.a)(c||(c=Object(a.a)(["\n  outline: 0;\n"])))},166:function(e,t,n){"use strict";var c=n(32),a=n(39),r=n(175),i=function(){function e(){Object(c.a)(this,e),this._id="",this.title="",this.description="",this.srcImage="",this.category="",this.subCategory="",this.nameMember="",this.amountComment=0,this.createdAt=Date.now(),this.updateAt=Date.now()}return Object(a.a)(e,[{key:"getDetail",value:function(e){return r.a.get("/image/".concat(e))}},{key:"uploadToCloudinary",value:function(e){return r.a.post("/upload",e)}},{key:"createImage",value:function(e){}},{key:"getAllExcludeK16",value:function(e,t){return r.a.get("/",{params:{page:e,limit:20}})}},{key:"getK16Only",value:function(e,t){return r.a.get("/k16",{params:{page:e,limit:20}})}},{key:"searchByName",value:function(e,t){return r.a.get("/images/by-name",{params:{name:e,page:t,limit:20}})}},{key:"searchByCategory",value:function(e,t){return r.a.get("/images",{params:{category:e,page:t,limit:20}})}}]),e}();t.a=new i},167:function(e,t,n){"use strict";var c=n(168),a=n(77),r=n(0),i=n(165),o=(n(186),n(5));t.a=function(e){var t=e.pins;return Object(a.a)(e,["pins"]),Object(o.jsx)("div",{className:"mainboard",children:Object(o.jsx)("div",{className:"mainboard__container",children:t.sort((function(e,t){return.5-Math.random()})).map((function(e,t){var n=e.srcImage;return Object(r.createElement)(i.b,Object(c.a)(Object(c.a)({urls:n},e),{},{key:t}))}))})})}},173:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var c,a=n(21),r=n(7),i=n(77),o=n(0),s=n(112),l=n(22),u=n(76),d=n(54),j=n(238),b=n(5);t.b=function(e){var t=e.setShowFormReply,n=e.parentId,c=e.isReply,a=(Object(i.a)(e,["setShowFormReply","parentId","isReply"]),Object(o.useContext)(j.ImageContext)),l=a.imageId,f=a.createCommentFunc,x=Object(o.useState)(!!c),p=Object(r.a)(x,2),h=p[0],g=p[1],O=Object(o.useRef)(),v=Object(o.useRef)();return Object(b.jsx)(b.Fragment,{children:h||c?Object(b.jsxs)(m,{flexDirection:"column",children:[Object(b.jsxs)(s.a,{alignItems:"center",children:[Object(b.jsx)("label",{htmlFor:"userName",children:"Name"}),Object(b.jsx)("input",{type:"text",name:"userName",ref:O})]}),Object(b.jsxs)(s.a,{alignItems:"center",children:[Object(b.jsx)("label",{htmlFor:"content",children:"Content"}),Object(b.jsx)("textarea",{name:"content",id:"content",cols:"30",rows:"5",ref:v})]}),Object(b.jsxs)(s.a,{justifyContent:"center",children:[Object(b.jsx)(u.a,{bgColor:d.a.RED,color:d.a.WHITE,type:"submit",onClick:function(){return function(){var e=O.current.value,t=v.current.value;return e?t?void(e&&t&&f(c&&n?{username:e,content:t,image_id:n,createdAt:Date.now(),send:"replyComment"}:{username:e,content:t,image_id:l,createdAt:Date.now()})):(v.current.focus(),!1):(O.current.focus(),!1)}()},children:"Send"}),Object(b.jsx)(u.a,{bgColor:d.a.GRAY,onClick:function(){g(!1),t&&t(!1)},children:"Cancel"})]})]}):Object(b.jsx)(u.a,{bgColor:d.a.GRAY,color:d.a.BLACK,onClick:function(){return g(!0)},children:"Add Comment"})})};var m=l.a.div(c||(c=Object(a.a)(["\n  display: flex;\n  flex-direction: column;\n  gap: 30px;\n  background-color: #f5f5f5;\n  padding: 12px;\n  border-radius: 12px;\n\n  label {\n    font-weight: 600;\n    margin-right: 8px;\n    max-width: 80px;\n  }\n\n  input {\n    border: 1px solid lightgray;\n    font-size: 16px;\n    height: 30px;\n    border-radius: 8px;\n    flex-grow: 1;\n    padding-left: 8px;\n    width: inherit;\n  }\n\n  textarea {\n    flex-grow: 1;\n    width: inherit;\n    border: 1px solid lightgray;\n    font-size: 16px;\n    border-radius: 8px;\n    padding-left: 8px;\n\n\n  }\n\n  textarea, input:focus {\n    outline: lightcoral;\n    outline-offset: 1px;\n\n  }\n\n  textarea, input:active {\n    outline: lightcoral;\n    outline-offset: 1px;\n  }\n\n  textarea, input:hover {\n    outline: none;\n  }\n"])))},175:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n(193),a=n.n(c).a.create({baseURL:"http://localhost:5555/",headers:{Authorization:"Client-ID O3rLFqpPo-J7uc6VSgVZGyBMb4SSNg-EYMcIWeVeQ1Q"}})},183:function(e,t,n){},185:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var c,a=n(21),r=n(22).a.p(c||(c=Object(a.a)(["\n    font-size : ",";\n    font-weight: ",";\n    color : ",";\n    word-break: break-word;\n"])),(function(e){return e.fontSize||"16px"}),(function(e){return e.fontWeight||500}),(function(e){return e.color||"#000"}))},186:function(e,t,n){},238:function(e,t,n){"use strict";n.r(t),n.d(t,"ImageContext",(function(){return U}));var c=n(21),a=n(19),r=n(6),i=n.n(r),o=n(211),s=n(12),l=n(7),u=n(0),d=n(248),j=n(112),b=n(76),m=n(54),f=n(185),x=n(249),p=n(77),h=n(173),g=n(212),O=n.n(g),v=n(5),C={username:"Abc",content:"Wow anh dep qua di!",createdAt:"13/11/2022",_id:"123123",image_id:"123123asdsdqwe",reply:[]},y=function(e){var t=e.localComment,n=e.isChild,c=Object(u.useState)(!1),a=Object(l.a)(c,2),r=a[0],i=a[1];return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(j.a,{gap:"4px",alignItems:"center",children:[Object(v.jsx)(f.a,{fontWeight:700,className:"mr-1 w-max truncate",style:{width:"70px"},children:t.username||"anonymous"}),Object(v.jsx)(f.a,{fontWeight:400,fontSize:"12px",className:"ml-4",children:Object(v.jsx)("p",{dangerouslySetInnerHTML:{__html:t.content}})})]}),Object(v.jsx)("div",{className:"mt-1"}),Object(v.jsxs)(j.a,{gap:"8px",alignItems:"center",justifyContent:"space-between",children:[Object(v.jsx)(f.a,{fontSize:"12px",className:"mr-4",color:m.a.GRAY,children:new Date(t.createdAt).toLocaleString()}),!n&&Object(v.jsx)(b.a,{padding:"4px",bgColor:"#f5f5f5",className:"ml-4",onClick:function(){i(!0)},children:Object(v.jsx)(O.a,{fontSize:"small"})})]}),r&&Object(v.jsx)(h.b,{isReply:!0,parentId:t._id,setShowFormReply:i})]})};var w,I,k,S=function(e){var t=e.comment,n=void 0===t?C:t;return Object(p.a)(e,["comment"]),Object(v.jsx)(j.a,{justifyContent:"space-between",flexDirection:"column",gap:"8px",children:Object(v.jsxs)("div",{className:"w-full ",children:[Object(v.jsx)(y,{localComment:n}),Object(v.jsx)("div",{className:"ml-3",children:n.reply.length>0&&n.reply.map((function(e,t){return Object(v.jsx)(y,{localComment:e,isChild:!0},t)}))})]})})},A=n(184),D=n.n(A),R=n(4),N=n(72),W=n(22),_=n(253),F=n(166),z=n(32),E=n(39),T=n(175),G=new(function(){function e(){Object(z.a)(this,e),this.userName="",this.content="",this.createdAt=Date.now(),this.image_id=""}return Object(E.a)(e,[{key:"getCommentByImageId",value:function(e){return T.a.get("/comments/".concat(e))}}]),e}()),H=n(160),Y=n(167),B=n(237),L="connect",M="joinRoom",V="createComment",K="sendReplyCommentToClient",P="sendCommentToClient",Q="editHeader",q="sendEditHeaderToClient",J="disconnect",U=Object(u.createContext)({imageId:null,createCommentFunc:function(){},editHeader:function(){}}),Z=Object(B.a)("http://localhost:5555/");t.default=function(e){Object.assign({},e);var t=Object(R.n)().id,n=Object(u.useState)(null),c=Object(l.a)(n,2),r=c[0],p=c[1],g=Object(u.useState)(null),O=Object(l.a)(g,2),C=O[0],y=O[1],w=Object(N.useQuery)(["getImageDetail",t],Object(s.a)(i.a.mark((function e(){var n,c,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.getDetail(t);case 2:return n=e.sent,c=Object(o.a)(n.data.images),a=c[0],r=c.slice(1),e.abrupt("return",{detail:a,references:r});case 5:case"end":return e.stop()}}),e)}))),{initialData:{},enabled:!!t,onSuccess:function(e){p(e.detail)}}),I=w.data,k=I.detail,A=I.references,W=w.isFetching,_=(w.refetch,Object(N.useQuery)(["getComment",t],Object(s.a)(i.a.mark((function e(){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,G.getCommentByImageId(t);case 2:return n=e.sent,e.abrupt("return",n.data.comments);case 4:case"end":return e.stop()}}),e)}))),{initialData:[],enabled:!!t,onSuccess:function(e){return y(e)}})),z=(_.data,_.isFetching),E=(_.refetch,Object(u.useState)(!1)),T=Object(l.a)(E,2),B=T[0],te=T[1],ne=Object(u.useState)(!1),ce=Object(l.a)(ne,2),ae=ce[0],re=ce[1],ie=Object(u.useCallback)((function(e){e.stopPropagation(),k.srcImage&&D.a.saveAs(k.srcImage,"image")}),[]),oe=Object(u.useState)(Z.connected),se=Object(l.a)(oe,2),le=se[0],ue=se[1];Object(u.useEffect)((function(){return console.log("effect run1"),Z.on(L,(function(e){ue(!0)})),Z.on(J,(function(){ue(!1)})),function(){Z.off(L),Z.off(J)}}),[]),Object(u.useEffect)((function(){return console.log("effect run2"),le&&(Z.emit(M,t),Z.on(P,(function(e){y([e].concat(Object(a.a)(C))),console.log("nhan duoc comment khac tu server",e)})),Z.on(K,(function(e){y((function(t){return t.map((function(t){return t._id===e._id?e:t}))})),console.log("nhan duoc comment reply khac tu server",e)})),Z.on(q,(function(e){p(e),re(!1),console.log("nhan duoc header moi tu server",e)}))),function(){Z.off(M),Z.off(P),Z.off(K),Z.off(q)}}),[Z,le,t]);var de=Object(u.useRef)(),je=Object(u.useRef)();function be(){var e=de.current.value,n=je.current.value;return e?n?void Z.emit(Q,{title:e,description:n,id:t}):(je.current.focus(),!1):(de.current.focus(),!1)}return W||z?Object(v.jsx)(H.a,{className:"selfCenter"}):r?Object(v.jsxs)(U.Provider,{value:{imageId:t,createCommentFunc:function(e){Z.emit(V,e)},editHeader:be},children:[Object(v.jsx)($,{children:Object(v.jsxs)(d.a,{container:!0,spacing:2,className:"imageWrap",children:[Object(v.jsx)(d.a,{item:!0,xs:12,md:6,style:{padding:"20px"},children:Object(v.jsx)("img",{src:null===r||void 0===r?void 0:r.srcImage,alt:"pin"})}),Object(v.jsx)(d.a,{item:!0,xs:12,md:6,style:{padding:"20px"},children:ae?Object(v.jsx)(v.Fragment,{children:Object(v.jsxs)(h.a,{flexDirection:"column",children:[Object(v.jsxs)(j.a,{alignItems:"center",children:[Object(v.jsx)("label",{htmlFor:"title",children:"Title"}),Object(v.jsx)("input",{type:"text",name:"title",ref:de,defaultValue:r.title})]}),Object(v.jsxs)(j.a,{alignItems:"center",children:[Object(v.jsx)("label",{htmlFor:"description",children:"Description"}),Object(v.jsx)("textarea",{name:"description",id:"description",cols:"30",rows:"5",ref:je,defaultValue:r.description})]}),Object(v.jsxs)(j.a,{gap:"4px",justifyContent:"center",children:[Object(v.jsx)(b.a,{bgColor:m.a.RED,color:m.a.WHITE,onClick:function(){return be()},children:"Save"}),Object(v.jsx)(b.a,{bgColor:m.a.GRAY,onClick:function(){return re(!1)},children:"Cancel"})]})]})}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(j.a,{justifyContent:"space-between",alignItems:"center",children:[Object(v.jsxs)(j.a,{gap:"4px",children:[Object(v.jsx)(b.a,{bgColor:m.a.GRAY,color:m.a.BLACK,onClick:ie,children:"Download"}),Object(v.jsx)(b.a,{bgColor:m.a.GRAY,onClick:function(){return re(!0)},children:"Edit"})]}),Object(v.jsx)(f.a,{fontSize:"12px",fontWeight:400,color:"gray",children:new Date(null===r||void 0===r?void 0:r.updatedAt).toLocaleString()})]}),Object(v.jsx)("br",{}),r.title?Object(v.jsx)(f.a,{fontSize:"36px",fontWeight:700,children:r.title}):Object(v.jsx)(f.a,{fontSize:"36px",fontWeight:700,color:m.a.GRAY,children:"Not have name yet"}),Object(v.jsx)("br",{}),r.description?Object(v.jsx)(f.a,{fontSize:"16px",fontWeight:400,children:r.description}):Object(v.jsx)(f.a,{fontSize:"16px",fontWeight:400,color:m.a.GRAY,children:"Not have description yet"}),Object(v.jsx)("br",{}),Object(v.jsxs)(j.a,{gap:"8px",alignItems:"center",children:[Object(v.jsxs)(f.a,{fontWeight:600,fontSize:"20px",children:[C.length," Comments"]}),Object(v.jsx)(ee,{bgColor:"#fff",onClick:function(){return te(!B)},children:Object(v.jsx)(x.a,{style:{transition:"all 0.3s ease",transform:B?"rotate(0deg)":"rotate(-90deg)"}})})]}),Object(v.jsx)("br",{}),B&&Object(v.jsx)(X,{flexDirection:"column",gap:"20px",children:C.map((function(e,t){return Object(v.jsx)(S,{comment:e},t)}))}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(h.b,{})]})})]})}),Object(v.jsx)("br",{}),Object(v.jsx)("br",{}),Object(v.jsx)(f.a,{fontWeight:700,fontSize:"24px",className:"ml-4",children:"More like this"}),Object(v.jsx)(Y.a,{pins:A})]}):Object(v.jsx)("h1",{children:" ID invalid "})};var X=Object(W.a)(j.a)(w||(w=Object(c.a)(["\n  box-sizing: border-box;\n  height: max-content;\n  max-height: 500px;\n  //overflow: hidden;\n  overflow-y: scroll;\n"]))),$=Object(W.a)(_.a)(I||(I=Object(c.a)(["\n  display: flex;\n  justify-content: center;\n  background-color: #fff;\n  padding-top: 20px;\n  padding-bottom: 30px;\n\n  .imageWrap {\n    box-shadow: rgb(0 0 0 / 10%) 0px 1px 20px 0px;\n    border-radius: 20px;\n    width: 65vw;\n    height: max-content;\n  }\n\n  @media (max-width: 768px) {\n    padding-top: 10px;\n    .imageWrap {\n      width: 90vw;\n    }\n  }\n\n  img {\n    display: block;\n    width: 100%;\n    height: auto;\n    border-radius: 12px;\n  }\n"]))),ee=Object(W.a)(b.a)(k||(k=Object(c.a)(["\n  :hover {\n    background-color: #d9d9d9;\n  }\n"])))}}]);
//# sourceMappingURL=2.136d0ca1.chunk.js.map