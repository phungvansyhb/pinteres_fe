{"version":3,"sources":["components/Pin.js","api/Image.js","components/Mainboard.js","components/CategoryItem.js","api/Base.js","components/Home.js"],"names":["Pin","srcImage","title","_id","description","createdAt","updatedAt","amountComment","navigate","useNavigate","handleDownload","useCallback","e","stopPropagation","FileSaver","saveAs","Date","now","toString","className","onClick","src","alt","padding","bgColor","PALLET","RED","color","WHITE","style","fontWeight","display","alignItems","ModalStyled","styled","Modal","Image","this","category","subCategory","nameMember","updateAt","id","Base","get","data","post","page","limit","params","name","Mainboard","pins","sort","a","b","Math","random","map","pin","index","urls","key","CategoryItemStyled","IconButtonStyled","CategoryItem","activeKey","toggleCategory","isActive","useMemo","BLACK","axios","create","baseURL","process","headers","Authorization","Home","React","forwardRef","ref","useState","activeCategory","setActiveCategory","useInfiniteQuery","pageParam","result","getAllExcludeK16","searchByCategory","images","getNextPageParam","lastPage","allPages","length","hasNextPage","fetchNextPage","hasPreviousPage","isFetchingNextPage","toggleMenuCategory","isFetching","useImperativeHandle","onSearchSubmit","useEffect","fetching","handleScroll","target","scrollingElement","scrollHeight","scrollTop","clientHeight","document","addEventListener","removeEventListener","CategoryWrapper","item","pages","group","i","div","FlexExtend","FlexStyled"],"mappings":"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","file":"static/js/6.e6838978.chunk.js","sourcesContent":["import React, {useCallback} from \"react\";\nimport \"./Pin.css\";\nimport Modal from \"@material-ui/core/Modal\";\nimport styled from \"styled-components\";\nimport Box from \"@material-ui/core/Box\";\nimport {IconButtonStyled} from '../styledCss/ButtonStyled'\nimport {PALLET} from \"../styledCss/Theme\";\nimport Forum from \"@material-ui/icons/Forum\";\nimport FileSaver from 'file-saver'\nimport {CloudDownload} from \"@material-ui/icons\";\nimport {useNavigate} from \"react-router-dom\";\nimport LazyLoad from 'react-lazyload'\n\nfunction Pin({srcImage, title, description, createdAt, updatedAt, _id, amountComment, ...props}) {\n    const navigate = useNavigate()\n    const handleDownload = useCallback((e) => {\n        e.stopPropagation();\n        if (srcImage) {\n            FileSaver.saveAs(srcImage, title || 'image' + Date.now().toString())\n        }\n    }, [srcImage])\n    /* TODO : call api load comment */\n    return (\n        <>\n            <div className=\"pin\">\n                <div className=\"pin__container\" onClick={() => navigate(`/image/${_id}`)}>\n\n                    <img src={srcImage} alt=\"pin\"/>\n                    <div className='pin__itemOverlay'>\n                        <IconButtonStyled padding={'8px'} bgColor={PALLET.RED} color={PALLET.WHITE}\n                                          onClick={handleDownload}>\n                            <CloudDownload/>\n                        </IconButtonStyled>\n\n                        <div style={{color: PALLET.WHITE, fontWeight: 700, display: 'flex', alignItems: 'center'}}>\n                            {amountComment} <Forum/>\n                        </div>\n                    </div>\n\n                </div>\n            </div>\n\n        </>\n    );\n}\n\nexport default Pin;\n\nexport const ModalStyled = styled(Modal)`\n  outline: 0;\n`;\n","import {Base} from './Base'\n\nclass Image {\n    constructor() {\n        this._id = ''\n        this.title = ''\n        this.description = ''\n        this.srcImage = ''\n        this.category = ''\n        this.subCategory = ''\n        this.nameMember = ''\n        this.amountComment = 0\n        this.createdAt = Date.now()\n        this.updateAt = Date.now()\n    }\n\n    getDetail(id) {\n        return Base.get(`/image/${id}`)\n    }\n\n    uploadToCloudinary(data) {\n        return Base.post('/upload', data)\n    }\n\n    createImage(data) {\n\n    }\n\n    getAllExcludeK16(page , limit) {\n        return Base.get('/' , {params : {page : page , limit : 20}})\n    }\n    getK16Only(page , limit) {\n        return Base.get('/k16' , {params : {page : page , limit : 20}})\n    }\n\n    searchByName(name , page) {\n        return Base.get('/images/by-name', {params: {name: name , page : page , limit : 20}})\n    }\n\n    searchByCategory(category , page) {\n        return Base.get('/images', {params: {category: category , page : page ,limit : 20}})\n    }\n}\n\nexport default new Image()\n","import React from \"react\";\nimport Pin from \"./Pin\";\nimport \"./Mainboard.css\";\n\nfunction Mainboard({pins, ...props}) {\n    return (\n        <div className=\"mainboard\">\n            <div className=\"mainboard__container\">\n                {pins.sort(function (a, b) {\n                    return 0.5 - Math.random();\n                }).map((pin, index) => {\n                    let {srcImage} = pin;\n                    return <Pin urls={srcImage} {...pin} key={index}/>;\n                })}\n            </div>\n        </div>\n    );\n}\n\nexport default Mainboard;\n","import React, {useMemo} from 'react';\nimport {IconButtonStyled} from \"../styledCss/ButtonStyled\";\nimport styled from \"styled-components\";\nimport {PALLET} from \"../styledCss/Theme\";\n\n\n\nfunction CategoryItem({category, activeKey, toggleCategory, ...props}) {\n    const isActive = useMemo(() => {\n        if (activeKey === category) return true;\n        return false\n    }, [activeKey, category])\n    return (\n        <CategoryItemStyled bgColor={isActive ? '#FECA6E' : '#fff'}\n                            color={isActive ? PALLET.WHITE : PALLET.BLACK}\n                            onClick={() => toggleCategory(category)} className='capitalize'>{category}</CategoryItemStyled>\n    );\n}\n\nexport const CategoryItemStyled = styled(IconButtonStyled)`\n  @media (max-width: 768px){\n    border-radius: 8px;\n    padding: 8px;\n  }\n  :hover {\n    background-color: #d9d9d9;\n  }\n`\n\nexport default CategoryItem;","import axios from \"axios\";\n\nexport const Base =  axios.create({\n    baseURL: process.env.REACT_APP_BASE_URL,\n    headers: {\n        Authorization: \"Client-ID O3rLFqpPo-J7uc6VSgVZGyBMb4SSNg-EYMcIWeVeQ1Q\",\n    },\n});\n","import React, {useCallback, useEffect, useImperativeHandle, useRef, useState} from 'react';\nimport {FlexStyled} from \"../styledCss/FlexStyled\";\nimport CategoryItem from \"./CategoryItem\";\nimport Mainboard from \"./Mainboard\";\nimport styled from \"styled-components\";\nimport Image from '../api/Image'\nimport {useQuery, useInfiniteQuery} from \"react-query\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport {IconButtonStyled} from \"../styledCss/ButtonStyled\";\nimport {PALLET} from \"../styledCss/Theme\";\nimport Pin from \"./Pin\";\n\nconst category = [\"boy\", \"girl\", \"sexy\", \"wendy\", \"cute\", \"anime\", \"gamming\", \"meme\", \"food\", \"natura\", \"west-lake\", \"ho-tan-xa\", \"afternoon-sky\", \"flower\" ,\"dog\",\"motivation\"]\n\nconst Home = React.forwardRef(({...props}, ref) => {\n    const [activeCategory, setActiveCategory] = useState()\n    const {\n        data,\n        hasNextPage,\n        hasPreviousPage,\n        isFetchingNextPage,\n        fetchNextPage,\n        isFetching\n    } = useInfiniteQuery(['getAllExcludeK16', activeCategory], async ({pageParam}) => {\n        let result = {}\n        if (!activeCategory) {\n            result = await Image.getAllExcludeK16(pageParam)\n        } else {\n            result = await Image.searchByCategory(activeCategory, pageParam)\n        }\n        return [...result.data?.images]\n    }, {\n        getNextPageParam: (lastPage, allPages) => {\n            const nextPage = allPages.length + 1\n            return nextPage\n        }\n\n    })\n\n    const toggleMenuCategory = useCallback((category) => {\n        if (activeCategory !== category) {\n            setActiveCategory(category)\n        }\n    }, [category, activeCategory])\n    useImperativeHandle(ref, () => {\n        return {\n            onSearchSubmit: (category) => setActiveCategory(category)\n        }\n    }, [{}])\n    useEffect(() => {\n        let fetching = false;\n        const handleScroll = async (e) => {\n            const {scrollHeight, scrollTop, clientHeight} = e.target.scrollingElement;\n            if (!fetching && scrollHeight - scrollTop - clientHeight <= 100) {\n                fetching = true\n                if (hasNextPage) await fetchNextPage()\n                fetching = false\n            }\n        }\n        document.addEventListener('scroll', handleScroll)\n        return () => {\n            document.removeEventListener('scroll', handleScroll)\n        }\n    }, [fetchNextPage, hasNextPage])\n    return (\n        <>\n\n            <CategoryWrapper>\n                {category.map((item, index) => <CategoryItem category={item} activeKey={activeCategory}\n                                                             toggleCategory={toggleMenuCategory} key={index}/>)}\n            </CategoryWrapper>\n            <div className='mainboard'>\n                <div className=\"mainboard__container\">\n                    {\n                        data?.pages.map((group, i) => group.sort(function (a, b) {\n                            return 0.5 - Math.random();\n                        }).map((pin, index) => {\n                            let {srcImage} = pin;\n                            return <Pin urls={srcImage} {...pin} key={index}/>;\n                        }))\n                    }\n                </div>\n            </div>\n\n\n        </>\n    );\n})\nconst CategoryWrapper = styled.div`\n  display: flex;\n  justify-content: center;\n  overflow-x: auto;\n  white-space: nowrap;\n\n`\nexport const FlexExtend = styled(FlexStyled)`\n  overflow: auto;\n  gap: 6px;\n`\n\nexport default Home;"],"sourceRoot":""}